<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Control de Acceso</title>
<style>
  body{margin:0;font-family:Arial,sans-serif;background:#1f2634;color:#f4cf19;}
  header{background:#111;padding:10px;text-align:center;font-size:1.5em;font-weight:bold;color:#f4cf19;}
  nav{display:flex;justify-content:center;gap:10px;margin:10px 0;}
  .nav-btn{padding:8px 12px;background:#333;color:#f4cf19;border:none;border-radius:4px;cursor:pointer;transition:0.2s;}
  .nav-btn.active,.nav-btn:hover{background:#f4cf19;color:#111;}
  .page{display:none;padding:10px;}
  .page.active{display:block;}
  table{width:100%;border-collapse:collapse;margin-top:10px;}
  th,td{border:1px solid #f4cf19;padding:6px;text-align:center;}
  th{background:#333;color:#f4cf19;}
  button{cursor:pointer;transition:0.2s;}
  button:hover{opacity:0.8;}
  input, select{padding:4px;margin:2px;width:100%;}
  .modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:none;justify-content:center;align-items:center;color:#f4cf19;}
  .modal.active{display:flex;}
  .modal-content{background:#111;padding:20px;border-radius:6px;width:320px;max-width:90%;}
  .modal-content h3{margin-top:0;}
  #scanInput{width:100%;padding:6px;margin-top:10px;font-size:1em;}
</style>
</head>
<body>
<header>Control de Acceso</header>
<nav>
  <button class="nav-btn active" data-section="usuariosPage">Usuarios</button>
  <button class="nav-btn" data-section="movimientosPage">Movimientos</button>
  <button class="nav-btn" data-section="scanPage">Escanear</button>
</nav>

<div id="usuariosPage" class="page active">
  <h3>Agregar Usuario</h3>
  <select id="userL"></select>
  <input id="userNombre" placeholder="Nombre">
  <input id="userDni" placeholder="DNI">
  <select id="userTipo">
    <option value="propietario">Propietario</option>
    <option value="administracion">Administración</option>
    <option value="empleado">Empleado</option>
    <option value="obrero">Obrero</option>
    <option value="invitado">Invitado</option>
    <option value="guardia">Guardia</option>
  </select>
  <button id="addUserBtn">Agregar</button>
  <span id="userMessage"></span>
  <h3>Usuarios Registrados</h3>
  <table id="usersTable">
    <thead><tr><th>#L</th><th>Nombre</th><th>DNI</th><th>Tipo</th><th>Acciones</th></tr></thead>
    <tbody></tbody>
  </table>
</div>

<div id="movimientosPage" class="page">
  <h3>Movimientos</h3>
  <table id="movimientosTable">
    <thead><tr><th>#L</th><th>Nombre</th><th>DNI</th><th>Entrada</th><th>Salida</th><th>Tipo</th><th>Acciones</th></tr></thead>
    <tbody></tbody>
  </table>
  <div id="pagination" style="margin-top:10px;"></div>
  <button id="printPageBtn">Imprimir Movimientos</button>
</div>

<div id="scanPage" class="page">
  <h3>Escanear Código</h3>
  <button id="scanBtn">Abrir Escáner</button>
</div>

<!-- Modal Escaneo -->
<div id="scanModal" class="modal">
  <div class="modal-content">
    <h3>Escaneo de Código</h3>
    <input id="scanInput" placeholder="Escanee aquí">
    <div id="scanMessage"></div>
    <button id="cancelScanBtn">Cancelar</button>
    <audio id="scanOk" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
  </div>
</div>

<!-- Modal Edición Usuario -->
<div id="editUserModal" class="modal">
  <div class="modal-content">
    <h3>Editar Usuario</h3>
    <select id="editUserL"></select>
    <input id="editUserNombre" placeholder="Nombre">
    <input id="editUserDni" placeholder="DNI">
    <select id="editUserTipo">
      <option value="propietario">Propietario</option>
      <option value="administracion">Administración</option>
      <option value="empleado">Empleado</option>
      <option value="obrero">Obrero</option>
      <option value="invitado">Invitado</option>
      <option value="guardia">Guardia</option>
    </select>
    <span id="editUserMsg"></span>
    <button id="finalizeEditBtn">Guardar</button>
    <button id="cancelEditBtn">Cancelar</button>
  </div>
</div>

<!-- Firebase y App.js -->
<script type="module" src="app.js"></script>
</body>
</html>
