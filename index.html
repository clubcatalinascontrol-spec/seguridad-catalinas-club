<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Control de Ingresos</title>
  <link rel="stylesheet" href="styles.css">
  <script type="module" src="app.js" defer></script>
</head>
<body>
  <header>
    <h1>📋 Control de Ingresos</h1>
    <nav>
      <button onclick="showSection('panel')">PANEL</button>
      <button onclick="showSection('usuarios')">USUARIOS</button>
      <button onclick="showSection('config')">CONFIG</button>
      <button onclick="showSection('novedades')">NOVEDADES</button>
      <button onclick="showSection('expirados')">EXPIRADOS</button>
    </nav>
  </header>

  <!-- PANEL -->
  <section id="panel" class="active">
    <h2>Movimientos</h2>
    <div class="filters">
      <button onclick="filterPanel('todos')">TODOS</button>
      <button onclick="filterPanel('propietario')">PROPIETARIOS</button>
      <button onclick="filterPanel('admin')">ADMIN</button>
      <button onclick="filterPanel('empleado')">EMPLEADOS</button>
      <button onclick="filterPanel('obrero')">OBREROS</button>
      <button onclick="filterPanel('invitado')">INVITADOS</button>
      <button onclick="filterPanel('guardia')">GUARDIAS</button>
      <button onclick="filterPanel('otro')">OTROS</button>
      <button onclick="openScan()">ESCANEAR</button>
      <button onclick="printTable('panelTable')">IMPRIMIR</button>
    </div>
    <table id="panelTable">
      <thead>
        <tr>
          <th>ID</th>
          <th>Lote</th>
          <th>Nombre</th>
          <!-- DNI eliminado visualmente -->
          <th>Tipo</th>
          <th>Fecha</th>
          <th>Hora</th>
          <th>Acción</th>
          <th>Opciones</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

    <!-- Ficha de usuario -->
  <div id="fichaModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeFicha()">&times;</span>
      <h3>Ficha del Usuario</h3>
      <p><b>Lote:</b> <span id="fichaLote"></span></p>
      <p><b>Nombre:</b> <span id="fichaNombre"></span></p>
      <p><b>DNI:</b> <span id="fichaDni"></span></p>
      <p><b>Celular:</b> <span id="fichaCelular"></span></p>
      <p><b>Autorizante:</b> <span id="fichaAutorizante"></span></p>
      <p><b>Fecha Expedición:</b> <span id="fichaFecha"></span></p>
      <p><b>Tipo:</b> <span id="fichaTipo"></span></p>
    </div>
  </div>

  <!-- USUARIOS -->
  <section id="usuarios">
    <h2>Gestión de Usuarios</h2>
    <form id="userForm">
      <label>Lote</label>
      <input type="text" id="lote" placeholder="Ej: #L23" required>
      <label>Nombre Completo</label>
      <input type="text" id="nombre" placeholder="Nombre y Apellido" required>
      <label>DNI</label>
      <input type="text" id="dni" placeholder="Documento" required>
      <label>Celular</label>
      <input type="text" id="celular" placeholder="10 dígitos" pattern="\d{10}" required>
      <label>Autorizante</label>
      <input type="text" id="autorizante" placeholder="Máx 15 letras" pattern="[A-Za-z ]{1,15}" required>
      <label>Tipo</label>
      <select id="tipo">
        <option value="propietario">Propietario</option>
        <option value="admin">Admin</option>
        <option value="empleado">Empleado</option>
        <option value="obrero">Obrero</option>
        <option value="invitado">Invitado</option>
        <option value="guardia">Guardia</option>
        <option value="otro">Otro</option>
      </select>
      <button type="submit">Guardar Usuario</button>
    </form>
    <table id="usuariosTable">
      <thead>
        <tr>
          <th>Lote</th><th>Nombre</th><th>DNI</th><th>Tipo</th><th>Acción</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- NOVEDADES -->
  <section id="novedades">
    <h2>Cargar Novedad</h2>
    <form id="novedadForm">
      <input type="text" id="novedadDesc" placeholder="Descripción" required>
      <input type="date" id="novedadFecha" required>
      <input type="time" id="novedadHora" required>
      <button type="submit">Cargar</button>
    </form>
    <table id="novedadesTable">
      <thead>
        <tr>
          <th>Descripción</th><th>Fecha</th><th>Hora</th><th>Acción</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- CONFIG -->
  <section id="config">
    <h2>Configuración</h2>
    <button onclick="resetPassword()">Restaurar Contraseña</button>
  </section>

  <!-- EXPIRADOS -->
  <section id="expirados">
    <h2>Usuarios Expirados</h2>
    <table id="expiradosTable">
      <thead>
        <tr>
          <th>Lote</th><th>Nombre</th><th>DNI</th><th>Celular</th>
          <th>Autorizante</th><th>Tipo</th><th>F. Eliminación</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>
</body>
</html>
